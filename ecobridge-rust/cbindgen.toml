# ecobridge_rust/cbindgen.toml

# 语言设置为 C
language = "C"

# 头部注释，防止人工误改
header = "/* Generated by cbindgen. Do not edit manually. */"

# [关键配置] 结构体生成风格
# "type" 会生成: typedef struct MarketConfig { ... } MarketConfig;
# 这样 jextract 就会直接生成 MarketConfig 类，而不是 ecobridge_MarketConfig
style = "type"

[export]
# [关键配置] 确保这里没有 prefix 字段
# 如果之前有 prefix = "ecobridge_"，请务必删除或注释掉！
# prefix = "ecobridge_"  <-- 删除这行

# 确保导出我们在 build.rs 里指定的那些结构体
include = [
    "PidState",
    "TradeContext",
    "MarketConfig",
    "TransferResult",
    "TransferContext",
    "RegulatorConfig"
]

[parse]
# 解析依赖项，确保引用的类型能被正确识别
parse_deps = true
clean = true